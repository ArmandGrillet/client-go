openapi: 3.0.0
info:
  version: 1.0.0
  title: Identity and Access Management API
security:
  - token:
      []
tags:
  - name: iam
    description: DC/OS Identity and Access Management API
  - name: login
    description: Login- and authentication-related endpoints
  - name: oidc
    description: OpenID Connect endpoints, including provider management
  - name: users
    description: User management endpoints
  - name: groups
    description: Group management endpoints
  - name: permissions
    description: Permission management endpoints
  - name: saml
    description: SAML 2.0 endpoints, including provider management
  - name: ldap
    description: Directory (LDAP) back-end configuration and interaction endpoints
paths:
  /acs/api/v1/acls:
    get:
      operationId: getACLs
      summary: Retrieve all ACL objects.
      description: Get array of `ACL` objects.
      tags:
        - iam
        - permissions
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  array:
                    type: array
                    items:
                      $ref: "#/components/schemas/ACL"
  "/acls/{rid}":
    get:
      operationId: getResourceACLs
      summary: Retrieve ACL for a certain resource.
      description: Retrieve single `ACL` object, for a specific resource.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: The ID of the resource to retrieve the ACL for.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ACL"
    put:
      operationId: createResourceACL
      summary: Create ACL for a certain resource.
      description: Create new ACL for resource with ID `rid` (description in body, no
        permissions by default).
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: The ID of the resource for which the ACL should be created.
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ACLCreate"
        required: true
      responses:
        "201":
          description: ACL created.
        "409":
          description: Already exists (this resource already has an ACL set).
    patch:
      operationId: updateResourceACL
      summary: Update ACL for a certain resource.
      description: Update ACL for resource with ID `rid`.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: The ID of the resource for which the ACL should be created.
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ACLUpdate"
        description: New ACL.
        required: true
      responses:
        "204":
          description: Success.
    delete:
      operationId: deleteResourceACL
      summary: Delete ACL for a certain resource.
      description: Delete ACL of resource with ID `rid`.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: The ID of resource for which the ACL should be deleted.
          schema:
            type: string
      responses:
        "204":
          description: Success.
        "404":
          description: ACL not found.
  "/acls/{rid}/groups/{gid}":
    get:
      operationId: getResourceGroupActions
      summary: Get allowed actions for given resource and group.
      description: Get allowed actions for given resource and group.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID
          schema:
            type: string
        - name: gid
          in: path
          required: true
          description: group ID
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                type: object
                properties:
                  array:
                    type: array
                    items:
                      $ref: "#/components/schemas/Action"
    delete:
      operationId: forbitResourceGroupActions
      summary: Forbid all actions of given group to given resource.
      description: Forbid all actions of given group to given resource.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID.
          schema:
            type: string
        - name: gid
          in: path
          required: true
          description: group ID.
          schema:
            type: string
      responses:
        "204":
          description: Success.
  "/acls/{rid}/groups/{gid}/{action}":
    get:
      operationId: getResourceGroupAction
      summary: Query whether action is allowed or not.
      description: Query whether action is allowed or not.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID
          schema:
            type: string
        - name: gid
          in: path
          required: true
          description: group ID
          schema:
            type: string
        - name: action
          in: path
          required: true
          description: action name
          schema:
            type: string
      responses:
        "200":
          description: Boolean answer in JSON response body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ActionAllowed"
    put:
      operationId: permitResourceGroupAction
      summary: Permit single action for given resource and group.
      description: Permit single action for given resource and group.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID.
          schema:
            type: string
        - name: gid
          in: path
          required: true
          description: group ID.
          schema:
            type: string
        - name: action
          in: path
          required: true
          description: action name
          schema:
            type: string
      responses:
        "204":
          description: Success.
    delete:
      operationId: forbitResourceGroupAction
      summary: Forbid single action for given resource and group.
      description: Forbid single action for given resource and group.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID.
          schema:
            type: string
        - name: gid
          in: path
          required: true
          description: group ID.
          schema:
            type: string
        - name: action
          in: path
          required: true
          description: action name
          schema:
            type: string
      responses:
        "204":
          description: Success.
  "/acls/{rid}/permissions":
    get:
      operationId: getResourcePermissions
      summary: Retrieve all permissions for resource.
      description: Retrieve all permissions that are set for a specific resource.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ACLPermissions"
  "/acls/{rid}/users/{uid}":
    get:
      operationId: getResourceUserActions
      summary: Get allowed actions for given resource and user.
      description: Get allowed actions for given resource and user.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID
          schema:
            type: string
        - name: uid
          in: path
          required: true
          description: account ID
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                type: object
                properties:
                  array:
                    type: array
                    items:
                      $ref: "#/components/schemas/Action"
    delete:
      operationId: forbidResourceUserActions
      summary: Forbid all actions of given account to given resource.
      description: Forbid all actions of given account to given resource.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID.
          schema:
            type: string
        - name: uid
          in: path
          required: true
          description: account ID.
          schema:
            type: string
      responses:
        "204":
          description: Success.
  "/acls/{rid}/users/{uid}/{action}":
    get:
      operationId: getResourceUserAction
      summary: Query whether action is allowed or not.
      description: Query whether action is allowed or not.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID
          schema:
            type: string
        - name: uid
          in: path
          required: true
          description: account ID
          schema:
            type: string
        - name: action
          in: path
          required: true
          description: action name
          schema:
            type: string
      responses:
        "200":
          description: Boolean answer in JSON response body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ActionAllowed"
    put:
      operationId: permitResourceUserAction
      summary: Permit single action for given account and resource.
      description: Permit single action for given account and resource.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID.
          schema:
            type: string
        - name: uid
          in: path
          required: true
          description: account ID.
          schema:
            type: string
        - name: action
          in: path
          required: true
          description: action name
          schema:
            type: string
      responses:
        "204":
          description: Success.
        "409":
          description: Already exists (this account already has this action).
    delete:
      operationId: forbidResourceUserAction
      summary: Forbid single action for given account and resource.
      description: Forbid single action for given account and resource.
      tags:
        - iam
        - permissions
      parameters:
        - name: rid
          in: path
          required: true
          description: resource ID.
          schema:
            type: string
        - name: uid
          in: path
          required: true
          description: account ID.
          schema:
            type: string
        - name: action
          in: path
          required: true
          description: action name
          schema:
            type: string
      responses:
        "204":
          description: Success.
  /acs/api/v1/auth/jwks:
    get:
      operationId: getJWKS
      summary: Get the IAM's JSON Web Key Set (JWKS, according to RFCs 7517/7518).
      description: "This endpoint provides the IAM's JSON Web Key Set (JWKS), exposing
        public key details required for the process of DC/OS authentication
        token verification: the public key material can be used for verifying
        authentication tokens signed by the IAM's private key. The DC/OS
        authentication token is a JSON Web Token (JWT) of type RS256, and is
        required to have the two claims `exp` and `uid`. For interpretation of
        the data provided by the JWKS endpoint see
        https://tools.ietf.org/html/rfc7517 and
        https://tools.ietf.org/html/rfc7518."
      responses:
        "200":
          description: The response body contains a JSON Web Key Set document.
  /acs/api/v1/auth/login:
    post:
      operationId: login
      summary: Log in (obtain a DC/OS authentication token).
      description: "Exchange user credentials (regular user account: uid and password;
        service user account: uid and service login token) for a DC/OS
        authentication token. The resulting DC/OS authentication token is an RFC
        7519 JSON Web Token (JWT) of type RS256. It has a limited lifetime which
        depends on the IAM configuration (only, i.e. the lifetime cannot be
        chosen as part of the login HTTP request). The DC/OS authentication
        token can be verified out-of-band using a standards-compliant RS256 JWT
        verification procedure based on the long-lived public key material
        presented by the IAM's /auth/jwks endpoint, and by requiring the two
        claims `exp` and `uid` to be present."
      tags:
        - iam
        - login
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginObject"
        description: uid & password or uid & service login token.
        required: true
      responses:
        "200":
          description: Login successful. The response body contains a JSON object providing
            the authentication token.
          headers:
            Set-Cookie:
              description: A cookie containing the auth token (implementation detail for
                browser support, should not be of interest to general API
                consumers).
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthToken"
        "401":
          description: Login failed.
    get:
      operationId: loginWithProvider
      summary: Log in using an external identity provider.
      description: Log in using an external identity provider (via e.g. OpenID Connect), as
        specified via query parameter. This request initiates a single sign-on
        flow.
      tags:
        - iam
        - login
      parameters:
        - name: oidc-provider
          description: OIDC provider ID
          in: query
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Redirect to the identity provider.
  /acs/api/v1/auth/oidc/callback:
    get:
      summary: OpenID Connect callback URL.
      description: After successfully logging in to an OpenID Connect identity provider,
        the end-user is being redirected back to the IAM via this callback URL.
        API consumers are not required to explicitly interact with this
        endpoint. This URL usually needs to be handed over to an OpenID Connect
        provider (often called "redirect" or "callback" URL).
      tags:
        - iam
        - oidc
      responses:
        "302":
          description: OIDC authentication flow successful.
        "401":
          description: Problem in authentication flow.
  /acs/api/v1/auth/oidc/providers:
    get:
      operationId: getOIDCProviders
      summary: Get an overview for the configured OIDC providers.
      description: Get an overview for the configured OIDC providers. The response contains
        a JSON object, with each key being an OIDC provider ID, and each value
        being the corresponding provider description string. This endpoint does
        not expose sensitive provider configuration details.
      tags:
        - iam
        - oidc
      responses:
        "200":
          description: Success.
  "/auth/oidc/providers/{provider-id}":
    get:
      operationId: getOIDCProvider
      summary: Get configuration for a specific provider.
      description: Get configuration for a specific provider.
      tags:
        - iam
        - oidc
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the OIDC provider to retrieve the config for.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OIDCProviderConfig"
    put:
      operationId: configureOIDCProvider
      summary: Configure a new OIDC provider.
      description: Set up OIDC provider with the ID as specified in the URL, and with the
        config as specified via JSON in the request body.
      tags:
        - iam
        - oidc
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the provider to create.
          schema:
            type: string
      requestBody:
        $ref: "#/components/requestBodies/OIDCProviderConfig"
      responses:
        "201":
          description: Provider created.
        "409":
          description: Provider already exists.
    patch:
      operationId: updateOIDCProvider
      summary: Update OIDC provider config.
      description: Update config for existing OIDC provider.
      tags:
        - iam
        - oidc
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the provider to modify.
          schema:
            type: string
      requestBody:
        $ref: "#/components/requestBodies/OIDCProviderConfig"
      responses:
        "204":
          description: Update applied.
        "400":
          description: Various errors (e.g. provider not yet configured).
    delete:
      operationId: deleteOIDCProvider
      summary: Delete provider.
      description: Delete provider (disables authentication with that provider).
      tags:
        - iam
        - oidc
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the OIDC provider to delete.
          schema:
            type: string
      responses:
        "204":
          description: Success.
  /acs/api/v1/auth/saml/providers:
    get:
      operationId: getSAMLProviders
      summary: Get an overview for the configured SAML 2.0 providers.
      description: Get an overview for the configured SAML 2.0 providers. The response
        contains a JSON object, with each key being a SAML provider ID, and each
        value being the corresponding provider description string. This endpoint
        does not expose sensitive provider configuration details.
      tags:
        - iam
        - saml
      responses:
        "200":
          description: Success.
  "/auth/saml/providers/{provider-id}":
    get:
      operationId: getSAMLProvider
      summary: Get configuration for a specific SAML provider.
      description: Get configuration for a specific SAML provider.
      tags:
        - iam
        - saml
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the SAML provider to retrieve the config for.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SAMLProviderConfig"
    put:
      operationId: configureSAMLProvider
      summary: Configure a new SAML provider.
      description: Set up a SAML provider with the ID as specified in the URL, and with the
        config as given by the JSON document in the request body.
      tags:
        - iam
        - saml
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the provider to create.
          schema:
            type: string
      requestBody:
        $ref: "#/components/requestBodies/SAMLProviderConfig"
      responses:
        "201":
          description: Provider created.
        "409":
          description: Provider already exists.
    patch:
      operationId: updateSAMLProvider
      summary: Update SAML provider config.
      description: Update config for existing SAML provider.
      tags:
        - iam
        - saml
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the provider to modify.
          schema:
            type: string
      requestBody:
        $ref: "#/components/requestBodies/SAMLProviderConfig"
      responses:
        "204":
          description: Update applied.
        "400":
          description: Various errors (e.g. provider not yet configured).
    delete:
      operationId: deleteSAMLProvider
      summary: Delete provider.
      description: Delete provider (disables authentication with that provider).
      tags:
        - iam
        - saml
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the SAML provider to delete.
          schema:
            type: string
      responses:
        "204":
          description: Success.
  "/auth/saml/providers/{provider-id}/acs-callback":
    post:
      summary: The SP ACS callback endpoint.
      description: The IAM acts as SAML service provider (SP). As part of the
        authentication flow, a SAML identity provider (IdP) makes the end-user
        submit an authentication response to this endpoint.
      tags:
        - iam
        - saml
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the provider the authentication response is meant for.
          schema:
            type: string
      responses:
        "302":
          description: SAML authentication flow successful.
        "401":
          description: Problem in authentication flow.
  "/auth/saml/providers/{provider-id}/acs-callback-url":
    get:
      operationId: getSAMLProviderACSCallbackURL
      summary: Get the authentication callback URL for this SP.
      description: The IAM acts as SAML service provider (SP). A SAML identity provider
        (IdP) usually requires to be configured with the Assertion Consumer
        Service (ACS) callback URL of the SP (which is where the IdP makes the
        end-user submit the authentication response).
      tags:
        - iam
        - saml
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the SAML provider to retrieve the ACS callback URL for.
          schema:
            type: string
      responses:
        "200":
          description: The response body contains a JSON object declaring the callback URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SAMLACSCallbackUrlObject"
  "/auth/saml/providers/{provider-id}/sp-metadata":
    get:
      operationId: getSAMLProviderSPMetadata
      summary: Get SP metadata (XML).
      description: The IAM acts as SAML service provider (SP). This endpoint provides the
        SP metadata as an XML document. Certain identity providers (IdPs) may
        want to directly consume this document.
      tags:
        - iam
        - saml
      parameters:
        - name: provider-id
          in: path
          required: true
          description: The ID of the SAML provider to retrieve the metadata for.
          schema:
            type: string
      responses:
        "200":
          description: The response body contains the metadata in UTF-8 encoding, setting
            the Content-Type to `application/samlmetadata+xml`.
  /acs/api/v1/groups:
    get:
      operationId: getGroups
      summary: Retrieve all group objects.
      description: Retrieve array of `Group` objects.
      tags:
        - iam
        - groups
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                type: object
                properties:
                  array:
                    type: array
                    items:
                      $ref: "#/components/schemas/Group"
  "/groups/{gid}":
    get:
      operationId: getGroup
      summary: Get single group object.
      description: Get specific `Group` object.
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The ID of the group to retrieve.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Group"
    put:
      operationId: createGroup
      summary: Create a group.
      description: Create a group.
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The ID of the group.
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupCreate"
        required: true
      responses:
        "201":
          description: Group created.
        "409":
          description: Group exists.
    patch:
      operationId: updateGroup
      summary: Update group.
      description: Update existing group (description).
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The ID of the group to modify.
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupUpdate"
        required: true
      responses:
        "204":
          description: Update applied.
    delete:
      operationId: deleteGroup
      summary: Delete group.
      description: Delete group.
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The ID of the group to delete.
          schema:
            type: string
      responses:
        "204":
          description: Success
  "/groups/{gid}/permissions":
    get:
      operationId: getGroupPermissions
      summary: Retrieve group permissions.
      description: Retrieve permissions of this group.
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The group ID.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupPermissions"
  "/groups/{gid}/users":
    get:
      operationId: getGroupUsers
      summary: Retrieve members of a group.
      description: Retrieve users that are member of this group. Allows to query service
        accounts, defaults to list only user accounts.
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The group ID.
          schema:
            type: string
        - name: type
          in: query
          description: If set to `service`, list only service accounts. If unset, default
            to only listing user accounts members of a group.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupUsers"
  "/groups/{gid}/users/{uid}":
    delete:
      operationId: deleteGroupUser
      summary: Delete user account from group.
      description: Delete user account from group.
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The ID of the group to delete from.
          schema:
            type: string
        - name: uid
          in: path
          required: true
          description: The ID of the user account.
          schema:
            type: string
      responses:
        "204":
          description: Success.
    put:
      operationId: createGroupUser
      summary: Add account to group.
      description: Add account to group.
      tags:
        - iam
        - groups
      parameters:
        - name: gid
          in: path
          required: true
          description: The ID of the group to add the user account to.
          schema:
            type: string
        - name: uid
          description: The ID of the account to add.
          in: path
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Success
        "409":
          description: account is already part of the group.
  /acs/api/v1/ldap/config:
    get:
      operationId: getLDAPConfiguration
      summary: Retrieve current LDAP configuration.
      description: Retrieve current directory (LDAP) back-end configuration.
      tags:
        - iam
        - ldap
      responses:
        "200":
          description: The response body contains a JSON object providing the current
            configuration.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LDAPConfiguration"
        "400":
          description: Various errors. If no config has yet been stored, the custom error
            code `ERR_LDAP_CONFIG_NOT_AVAILABLE` is set in the response.
    put:
      operationId: createLDAPConfiguration
      summary: Set new LDAP configuration.
      description: Set new directory (LDAP) back-end configuration. Replace current
        configuration, if existing.
      tags:
        - iam
        - ldap
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LDAPConfiguration"
        description: JSON object containing the LDAP configuration details.
        required: true
      responses:
        "200":
          description: Configuration has been persisted. Basic validation tests passed, but
            the directory service was not contacted. You're encouraged to now
            perform a basic feature check against the directory back-end with
            the newly set configuration by using the the config test endpoint.
        "400":
          description: Various errors. If the configuration object itself is invalid, the
            custom error code `ERR_LDAP_CONFIG_INVALID` is set in the response
            and a description sheds light onto the problem specifics.
    delete:
      operationId: deleteLDAPConfiguration
      summary: Delete current LDAP configuration.
      description: Delete current directory (LDAP) back-end configuration. This deactivates
        the LDAP authentication.
      tags:
        - iam
        - ldap
      responses:
        "204":
          description: Configuration deleted.
        "400":
          description: Various errors. If no config has yet been stored, the custom error
            code `ERR_LDAP_CONFIG_NOT_AVAILABLE` is set in the response.
  /acs/api/v1/ldap/config/test:
    post:
      operationId: testLDAPBackendConnection
      summary: Test connection to the LDAP back-end.
      description: Perform basic feature tests. Verify that the current directory (LDAP)
        configuration parameters allow for a successful connection to the
        directory back-end. For instance, this endpoint simulates the procedure
        for authentication via LDAP, but provides more useful feedback upon
        failure than the actual login endpoint.
      tags:
        - iam
        - ldap
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LDAPTestCredentials"
        description: JSON object containing `uid` and password of an LDAP user. For the
          most expressive test result, choose credentials different from the
          lookup credentials. The `uid` is the string the user is supposed to
          log in with after successful LDAP back-end configuration.
        required: true
      responses:
        "200":
          description: Directory back-end was reached and all feature tests passed.
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/LDAPTestResultObject"
        "502":
          description: Either there was a connection error or one of the feature tests
            failed. To distinguish this response from a proxy-generated 502, a
            JSON object is included in the response. It contains a message in
            its `description` property, describing the problem in more detail.
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/LDAPTestResultObject"
  /acs/api/v1/ldap/importgroup:
    post:
      operationId: importLDAPGroup
      summary: Import an LDAP group.
      description: Attempt to import a group of users from the configured directory (LDAP)
        back-end. See docs/ldap.md for details on group import.
      tags:
        - iam
        - ldap
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LDAPImportGroupObject"
        description: A JSON object specifying the name of the group to be imported. The
          meaning of the name depends on the group search settings.
        required: true
      responses:
        "201":
          description: Success.
        "400":
          description: Various errors. If no directory back-end has been configured yet,
            the custom error code `ERR_LDAP_CONFIG_NOT_AVAILABLE` is set in the
            response. If there was no LDAP search result or an error occured
            during the search process, one of the custom error codes
            `ERR_LDAP_IMPORT_GROUP_NOT_FOUND` and
            `ERR_LDAP_IMPORT_SEARCH_FAILED` is set in the response, and a
            description is provided to report the problem specifics.
  /acs/api/v1/ldap/importuser:
    post:
      operationId: importLDAPUser
      summary: Import an LDAP user.
      description: Attempt to import a user from the configured directory (LDAP) back-end.
      tags:
        - iam
        - ldap
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LDAPImportUserObject"
        description: 'A JSON object specifying the username (read: "login" or "user ID") of
          the user that should be imported. That string is equivalent to the
          `uid` the user is supposed to log in with after successful import. The
          exact meaning of this string depends on the configured LDAP
          authentication method.'
        required: true
      responses:
        "201":
          description: Success.
        "400":
          description: Various errors. If no directory back-end has been configured yet,
            the custom error code `ERR_LDAP_CONFIG_NOT_AVAILABLE` is set in the
            response. If there was no LDAP search result or an error occured
            during the search process, one of the custom error codes
            `ERR_LDAP_IMPORT_USER_NOT_FOUND` and `ERR_LDAP_IMPORT_SEARCH_FAILED`
            is set in the response, and a description is provided to report the
            problem specifics.
  /acs/api/v1/users:
    get:
      operationId: getUsers
      summary: Retrieve all regular user accounts or service user accounts.
      description: Retrieve `User` objects. By default the list consists of regular user
        accounts, only. Alternatively, service user accounts may be requested
        instead.
      tags:
        - iam
        - users
      parameters:
        - name: type
          in: query
          description: If set to `service`, list only service user accounts. If unset,
            default to only listing regular user accounts.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                type: object
                properties:
                  array:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
  "/users/{uid}":
    get:
      operationId: getUser
      summary: Get single user object.
      description: Get specific `User` object.
      tags:
        - iam
        - users
      parameters:
        - name: uid
          in: path
          required: true
          description: The ID of the user object to retrieve.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
    put:
      operationId: createUser
      summary: Create user account.
      description: Create user (uid in url, details incl. credentials in body).
      tags:
        - iam
        - users
      parameters:
        - name: uid
          in: path
          required: true
          description: The ID of the user account to create.
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserCreate"
        description: Password/description.
        required: true
      responses:
        "201":
          description: User created.
        "409":
          description: User already exists.
    patch:
      operationId: updateUser
      summary: Update user account.
      description: Update existing user account (meta data and/or password).
      tags:
        - iam
        - users
      parameters:
        - name: uid
          in: path
          required: true
          description: The ID of the user account to modify.
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserUpdate"
        description: Password/description.
        required: true
      responses:
        "204":
          description: Update applied.
        "501":
          description: Not implemented for service user accounts.
    delete:
      operationId: deleteUser
      summary: Delete account.
      description: Delete account.
      tags:
        - iam
        - users
      parameters:
        - name: uid
          in: path
          required: true
          description: The ID of the user account to delete.
          schema:
            type: string
      responses:
        "204":
          description: Success.
        "400":
          description: Bad request.
        "404":
          description: User account not found.
  "/users/{uid}/groups":
    get:
      operationId: getUserGroups
      summary: Retrieve groups the user is member of.
      description: Retrieve groups the user is member of.
      tags:
        - iam
        - users
      parameters:
        - name: uid
          in: path
          required: true
          description: The ID of the user.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserGroups"
  "/users/{uid}/permissions":
    get:
      operationId: getUserPermissions
      summary: Retrieve permissions an account has.
      description: Retrieve the permissions for this account with direct permissions
        distinguished from those that are obtained through group membership.
      tags:
        - iam
        - users
      parameters:
        - name: uid
          in: path
          required: true
          description: The id of the user.
          schema:
            type: string
      responses:
        "200":
          description: Success.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserPermissions"
components:
  requestBodies:
    OIDCProviderConfig:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/OIDCProviderConfig"
      description: Provider config JSON object
      required: true
    SAMLProviderConfig:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SAMLProviderConfig"
      description: Provider config JSON object
      required: true
  securitySchemes:
    token:
      type: apiKey
      in: header
      name: Authorization
  schemas:
    LoginObject:
      type: object
      properties:
        uid:
          type: string
        password:
          type: string
        token:
          type: string
    AuthToken:
      type: object
      required:
        - token
      properties:
        token:
          type: string
      additionalProperties: false
    User:
      type: object
      required:
        - uid
        - url
        - description
        - is_remote
        - provider_type
        - provider_id
      properties:
        uid:
          type: string
        url:
          type: string
        description:
          type: string
        is_remote:
          type: boolean
        is_service:
          type: boolean
        public_key:
          type: string
        provider_type:
          type: string
        provider_id:
          type: string
      additionalProperties: false
    UserCreate:
      type: object
      properties:
        description:
          type: string
        password:
          type: string
        public_key:
          type: string
        provider_type:
          type: string
        provider_id:
          type: string
        cluster_url:
          type: string
        creator_uid:
          type: string
      additionalProperties: false
    UserUpdate:
      type: object
      properties:
        description:
          type: string
        password:
          type: string
      additionalProperties: false
    OIDCProviderConfig:
      type: object
      required:
        - description
        - issuer
        - base_url
        - client_secret
        - client_id
      properties:
        description:
          type: string
        issuer:
          type: string
        base_url:
          type: string
        client_secret:
          type: string
        client_id:
          type: string
        verify_server_certificate:
          type: boolean
        ca_certs:
          type: string
      additionalProperties: false
    Action:
      type: object
      required:
        - name
        - url
      properties:
        name:
          type: string
        url:
          type: string
      additionalProperties: false
    UserGroups:
      type: object
      properties:
        array:
          type: array
          items:
            type: object
            required:
              - group
              - membershipurl
            properties:
              membershipurl:
                type: string
              group:
                $ref: "#/components/schemas/Group"
            additionalProperties: false
    UserPermissions:
      type: object
      properties:
        direct:
          type: array
          items:
            type: object
            required:
              - rid
              - description
              - aclurl
              - actions
            properties:
              rid:
                type: string
              description:
                type: string
              aclurl:
                type: string
              actions:
                type: array
                items:
                  $ref: "#/components/schemas/Action"
            additionalProperties: false
        groups:
          type: array
          items:
            type: object
            required:
              - rid
              - gid
              - description
              - aclurl
              - membershipurl
              - actions
            properties:
              rid:
                type: string
              gid:
                type: string
              description:
                type: string
              aclurl:
                type: string
              membershipurl:
                type: string
              actions:
                type: array
                items:
                  $ref: "#/components/schemas/Action"
            additionalProperties: false
      additionalProperties: false
    Group:
      type: object
      required:
        - gid
        - url
        - description
        - provider_type
      properties:
        gid:
          type: string
        url:
          type: string
        description:
          type: string
        provider_type:
          type: string
      additionalProperties: false
    GroupCreate:
      type: object
      required:
        - description
      properties:
        description:
          type: string
        provider_type:
          type: string
      additionalProperties: false
    GroupUpdate:
      type: object
      required:
        - description
      properties:
        description:
          type: string
      additionalProperties: false
    GroupUsers:
      type: object
      properties:
        array:
          type: array
          items:
            type: object
            required:
              - membershipurl
              - user
            properties:
              membershipurl:
                type: string
              user:
                $ref: "#/components/schemas/User"
      additionalProperties: false
    GroupPermissions:
      type: object
      properties:
        array:
          type: array
          items:
            type: object
            required:
              - rid
              - description
              - aclurl
              - actions
            properties:
              rid:
                type: string
              description:
                type: string
              aclurl:
                type: string
              actions:
                type: array
                items:
                  $ref: "#/components/schemas/Action"
      additionalProperties: false
    ACL:
      type: object
      required:
        - rid
        - url
        - description
      properties:
        rid:
          type: string
        url:
          type: string
        description:
          type: string
      additionalProperties: false
    ACLCreate:
      type: object
      required:
        - description
      properties:
        description:
          type: string
      additionalProperties: false
    ACLUpdate:
      type: object
      required:
        - description
      properties:
        description:
          type: string
      additionalProperties: false
    ACLPermissions:
      type: object
      properties:
        groups:
          type: array
          items:
            type: object
            required:
              - gid
              - groupurl
              - actions
            properties:
              gid:
                type: string
              groupurl:
                type: string
              actions:
                type: array
                items:
                  $ref: "#/components/schemas/Action"
        users:
          type: array
          items:
            type: object
            required:
              - uid
              - userurl
              - actions
            properties:
              uid:
                type: string
              userurl:
                type: string
              actions:
                type: array
                items:
                  $ref: "#/components/schemas/Action"
      additionalProperties: false
    ActionAllowed:
      type: object
      required:
        - allowed
      properties:
        allowed:
          type: boolean
      additionalProperties: false
    SAMLProviderConfig:
      type: object
      required:
        - description
        - idp_metadata
        - sp_base_url
      properties:
        description:
          type: string
        idp_metadata:
          type: string
        sp_base_url:
          type: string
      additionalProperties: false
    SAMLACSCallbackUrlObject:
      type: object
      required:
        - acs-callback-url
      properties:
        acs-callback-url:
          type: string
      additionalProperties: false
    LDAPUserSearchConfig:
      type: object
      required:
        - search-base
        - search-filter-template
      properties:
        search-base:
          type: string
        search-filter-template:
          type: string
      additionalProperties: false
    LDAPGroupSearchConfig:
      type: object
      required:
        - search-base
        - search-filter-template
      properties:
        search-base:
          type: string
        search-filter-template:
          type: string
        member-attributes:
          type: array
          items:
            type: string
      additionalProperties: false
    LDAPConfiguration:
      type: object
      required:
        - host
        - port
        - enforce-starttls
        - use-ldaps
      properties:
        host:
          type: string
        dntemplate:
          type: string
        port:
          type: integer
        enforce-starttls:
          type: boolean
        use-ldaps:
          type: boolean
        lookup-dn:
          type: string
        lookup-password:
          type: string
        user-search:
          $ref: "#/components/schemas/LDAPUserSearchConfig"
        group-search:
          $ref: "#/components/schemas/LDAPGroupSearchConfig"
        ca-certs:
          type: string
        client-cert:
          type: string
      additionalProperties: false
    LDAPImportUserObject:
      type: object
      required:
        - username
      properties:
        username:
          type: string
      additionalProperties: false
    LDAPImportGroupObject:
      type: object
      required:
        - groupname
      properties:
        groupname:
          type: string
      additionalProperties: false
    LDAPTestCredentials:
      type: object
      required:
        - uid
        - password
      properties:
        uid:
          type: string
        password:
          type: string
      additionalProperties: false
    LDAPTestResultObject:
      type: object
      required:
        - code
        - description
      properties:
        code:
          type: string
        description:
          type: string
      additionalProperties: false
